(this["webpackJsonpbig-bulletin-board-ts"]=this["webpackJsonpbig-bulletin-board-ts"]||[]).push([[0],[,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o,s=n(1),a=n.n(s),c=n(7),r=n.n(c),i=(n(12),n(2)),l=n(3),u=n(5),d=n(4);n(13);!function(t){t[t.Reading=0]="Reading",t[t.SelectingLocation=1]="SelectingLocation",t[t.WritingPost=2]="WritingPost"}(o||(o={}));var h=o,p=(n(14),n(15),{formatDate:function(t){var e=new Date(t),n=e.getUTCMonth()+1,o=e.getUTCDate(),s=e.getUTCFullYear(),a=e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return(new Date).getUTCFullYear()!==s?n+"/"+o+"/"+s+" "+a:n+"/"+o+" "+a}}),m=n(0),b=function(t){var e=t.post,n=t.handleClick,o=e.user,s=e.date,a=e.message,c=e.color,r=e.x,i=e.y;return Object(m.jsx)("div",{className:"post-container",style:{left:r,top:i},children:Object(m.jsxs)("div",{className:"post",style:{backgroundColor:c},onClick:function(){return n(e)},children:[Object(m.jsxs)("div",{className:"heading",children:[Object(m.jsx)("b",{children:o})," ",s&&p.formatDate(s)]}),Object(m.jsx)("div",{className:"body",children:a})]})})},f={pointDistance:function(t,e,n,o){var s=n-t,a=o-e;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))},pointAngleRadians:function(t,e,n,o){return Math.atan2(o-e,n-t)},pointAngleDegrees:function(t,e,n,o){return 180*Math.atan2(o-e,n-t)/Math.PI}},j=(n(17),function(t){var e=t.x1,n=t.y1,o=t.x2,s=t.y2,a=(e+o)/2,c=(n+s)/2,r=f.pointDistance(e,n,o,s),i=f.pointAngleDegrees(e,n,o,s);return Object(m.jsx)("div",{className:"line",style:{left:a-r/2,top:c,width:r,transform:"rotate(".concat(i,"deg)")}})}),g=(n(18),function(t){var e=t.x,n=t.y,o=t.color;return Object(m.jsx)("div",{className:"post-cursor-box",style:{left:e-30,top:n-30,backgroundColor:o}})}),C=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={mouse_X:0,mouse_Y:0,clickedPost_X:0,clickedPost_Y:0,newPost_X:0,newPost_Y:0},t.boardClicked=function(){t.props.boardState===h.SelectingLocation&&(t.setState({newPost_X:t.state.mouse_X,newPost_Y:t.state.mouse_Y}),t.props.postCreate(t.state.mouse_X,t.state.mouse_Y))},t.handleMouseMove=function(e){var n=e.nativeEvent,o=n.clientX,s=n.clientY;t.setState({mouse_X:o,mouse_Y:s})},t.postClicked=function(e){t.props.boardState===h.Reading&&(t.props.postClicked(e.id),t.setState({clickedPost_X:e.x+90,clickedPost_Y:e.y+40}))},t.findPost=function(e){return t.props.posts.find((function(t){return t.id===e}))},t.superClick=function(){console.log("suuuuupa")},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this,e=this.state,n=e.clickedPost_X,o=e.clickedPost_Y,s=e.newPost_X,a=e.newPost_Y,c=e.mouse_X,r=e.mouse_Y;return Object(m.jsx)("div",{className:"board-container",onClick:this.superClick,children:Object(m.jsxs)("div",{className:"board",onClick:this.boardClicked,onMouseMove:this.handleMouseMove,children:[this.props.posts.map((function(e,n){return Object(m.jsx)(b,{post:e,handleClick:t.postClicked},n)})),this.props.posts.map((function(e,n){var o=t.findPost(e.parentPostId);return o?Object(m.jsx)(j,{x1:o.x+90,y1:o.y+40,x2:e.x+90,y2:e.y+40},n):null})),this.props.boardState===h.SelectingLocation&&Object(m.jsx)(j,{x1:n,y1:o,x2:c,y2:r}),this.props.boardState===h.WritingPost&&Object(m.jsx)(j,{x1:n,y1:o,x2:s,y2:a}),this.props.boardState===h.SelectingLocation&&Object(m.jsx)(g,{x:c,y:r,color:this.props.postColor}),this.props.boardState===h.WritingPost&&Object(m.jsx)(g,{x:s,y:a,color:this.props.postColor})]})})}}]),n}(s.Component),x=(n(19),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={comment:""},t.onCommentFieldChanged=function(e){t.setState({comment:e.currentTarget.value})},t.submitPressed=function(e){t.state.comment.length>0&&(t.handleSubmit(),e.preventDefault())},t.cancelPressed=function(){t.setState({comment:""}),t.props.onCancel()},t.handleKeyDown=function(e){"Enter"===e.key&&t.handleSubmit()},t.handleSubmit=function(){t.state.comment.length>0&&(t.props.onSubmit(t.state.comment),t.setState({comment:""}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"comment-form",style:{backgroundColor:this.props.color},onKeyDown:this.handleKeyDown,children:[Object(m.jsx)("h2",{children:"New Comment"}),Object(m.jsx)("div",{className:"editFields",children:Object(m.jsx)("div",{children:Object(m.jsx)("textarea",{name:"comment",placeholder:"What would you like to say?",value:this.state.comment,onChange:this.onCommentFieldChanged,maxLength:140})})}),Object(m.jsxs)("div",{className:"button-area",children:[Object(m.jsx)("button",{disabled:this.state.comment.length<=0,onClick:this.submitPressed,children:"Post"}),Object(m.jsx)("button",{onClick:this.cancelPressed,children:"Cancel"})]})]})}}]),n}(s.Component)),v={colorWithRandomHue:function(){return"hsl("+360*Math.random()+", 100%, 75%)"},colorLightWithRandomHue:function(){return"hsl("+360*Math.random()+", 80%, 75%)"},randomLightColor:function(){return"rgb("+(128+127*Math.random())+", "+(128+127*Math.random())+", "+(128+127*Math.random())+")"}},P={get:function(){return new Promise((function(t,e){fetch("/".concat("api","/posts")).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return e(t)}))}))},create:function(t){return new Promise((function(e,n){fetch("/".concat("api","/post"),{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))}},O=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(i.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={posts:[],boardState:h.Reading,postClickedId:"",postColor:v.randomLightColor(),newPost_X:0,newPost_Y:0},t.getAllPosts=function(){P.get().then((function(e){var n=e.map((function(t){return{id:t._id,parentPostId:t.parentPostId||void 0,user:t.user,date:t.createdAt,message:t.message,color:t.color,x:t.x,y:t.y}}));t.setState({posts:n})})).catch((function(t){console.log("err",t)}))},t.postClicked=function(e){t.setState({boardState:h.SelectingLocation,postClickedId:e})},t.presentPostCreateForm=function(e,n){t.setState({boardState:h.WritingPost,newPost_X:e,newPost_Y:n})},t.createPostSubitted=function(e){var n={parentPostId:t.state.postClickedId,user:"Myself",message:e,color:t.state.postColor,x:t.state.newPost_X-80,y:t.state.newPost_Y-30};t.setState({boardState:h.Reading}),P.create(n).then((function(e){t.getAllPosts()}))},t.cancelPost=function(){t.setState({boardState:h.Reading})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getAllPosts()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(C,{boardState:this.state.boardState,posts:this.state.posts,postClicked:this.postClicked,postCreate:this.presentPostCreateForm,postColor:this.state.postColor}),Object(m.jsxs)("div",{className:"ui-overlay",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"The Big Bulletin Board"}),Object(m.jsx)("div",{className:"header-bar"})]}),this.state.boardState===h.WritingPost&&Object(m.jsx)("div",{className:"comment-form-container",children:Object(m.jsx)(x,{onSubmit:this.createPostSubitted,onCancel:this.cancelPost,color:this.state.postColor})})]})]})}}]),n}(s.Component),y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(e){var n=e.getCLS,o=e.getFID,s=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),o(t),s(t),a(t),c(t)}))};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root")),y()}],[[20,1,2]]]);
//# sourceMappingURL=main.e1fde439.chunk.js.map